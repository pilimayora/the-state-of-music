<!DOCTYPE html>

<head>
	<title>The State of Music</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--loading jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<!--loading bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<!--loading roboto font -->
	<link rel='stylesheet' id='font-css' href='http://fonts.googleapis.com/css?family=Roboto:400,300,100' type='text/css' media='all' />

	<link rel="stylesheet" href="{{url_for('static',filename = 'css/style.css')}}">
</head>

<body>
	<div id='container'>

		<!--<div id = "cityMap"></div> div to hold map at city level -->

		<div class="row">
			<div class="col-md-3" id="sidePanel">
				<!-- loading logos here -->
				<div id="logo">
					<input type="image" src="{{url_for('static',filename = 'images/logo.png')}}" onclick="updatelogo()" width="100%">
				</div>

				<div id="displayInfo">
					<h3>About</h3>
					<h4>the State of Music</h4>
					<small>
						This is some stuff about music in the US.
						This is some stuff about music in the US.
						This is some stuff about music in the US.
						This is some stuff about music in the US.
						This is some stuff about music in the US.
						This is some stuff about music in the US.
						This is some stuff about music in the US.
						This is some stuff about music in the US.
					</small>
				</div>

				<div id="displayStats">
					<h5>Top 5 states:</h5>
					<svg viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet"></svg>
				</div>

			</div>
			<div class="col-md-9" id="mainPanel">
				<!-- loading icons here -->
				<div class="row" id="navbar">

					<div class="col-md-6">
						<div class="row">
							<div class="col-md-3">
								<div class='genre-icon' id='pop'>
									<input type="image" src="{{url_for('static',filename = 'images/pop.png')}}" onclick="updateData()" width="100%">
								</div>
							</div>

							<div class="col-md-3">
								<div class='genre-icon' id='rock_metal'>
									<input type="image" src="{{url_for('static',filename = 'images/rock_metal.png')}}" onclick="updateData()" width="100%">
								</div>
							</div>

							<div class="col-md-3">
								<div class='genre-icon' id='indie'>
									<input type="image" src="{{url_for('static',filename = 'images/indie.png')}}" value="" onclick="updateData()" width="100%">
								</div>
							</div>

							<div class="col-md-3">
								<div class='genre-icon' id='hiphop'>
									<input type="image" src="{{url_for('static',filename = 'images/hiphop.png')}}" onclick="updateData()" width="100%">
								</div>
							</div>
						</div>
					</div>

					<div class="col-md-6">
						<div class="row">
							<div class="col-md-3">
								<div class='genre-icon' id='rnb'>
									<input type="image" src="{{url_for('static',filename = 'images/rnb.png')}}" onclick="updateData()" width="100%">
								</div>
							</div>

							<div class="col-md-3">
								<div class='genre-icon' id='classical_jazz'>
									<input type="image" src="{{url_for('static',filename = 'images/classical_jazz.png')}}" onclick="updateData()" width="100%">
								</div>
							</div>

							<div class="col-md-3">
								<div class='genre-icon' id='electronic_dance'>
									<input type="image" src="{{url_for('static',filename = 'images/electronic_dance.png')}}" onclick="updateData()" width="100%">
								</div>
							</div>

							<div class="col-md-3">
								<div class='genre-icon' id='country_folk'>
									<input type="image" src="{{url_for('static',filename = 'images/country_folk.png')}}" onclick="updateData()" width="100%">
								</div>
							</div>
						</div>
					</div>

				</div>

				<div class="row">
					<div id="mapCanvas">
						<!-- div and svg to hold the map. -->
						<svg id="statesvg" viewBox="0 0 960 630" preserveAspectRatio="xMidYMid meet"></svg>
					</div>
					<div id="tooltip"></div><!-- div to hold tooltip. -->
				</div>

			</div>
</body>


<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script><!-- D3 graphing library -->
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://d3js.org/topojson.v1.min.js"></script><!-- topojson library -->
<script src="{{url_for('static',filename = 'js/uStates.js')}}"></script><!-- creates uStates. -->
<script src="{{url_for('static',filename = 'js/statistics.js')}}"></script><!-- creates statistics in side bar. -->
<script>
	//tooltip function for top genres
	function tooltip_topgenre(name, abbr, value, genre) {
		/* function to create html content string in tooltip div. */
		return "<h4>" + name + ", " + abbr + "</h4>" +
			"<table><tr><td> Top Genre:</td><td>" + genre + "</td></tr>" +
			"</table>" +
			"<small>(click to zoom)</small>";
	}
	//tooltip function for all genres
	function tooltip_genre(name, abbr, value, genre) {
		/* function to create html content string in tooltip div. */
		return "<h4>" + name + ", " + abbr + "</h4>" +
			"<table><tr><td>" + genre + "</td><td>" + value * 100 + "%</td></tr>" +
			"</table>" +
			"<small>(click to zoom)</small>";
	}
	uStates.draw("topgenre", tooltip_topgenre)
	stats.draw("topgenre")
	//Update data section (Called from the onclick)
	function updateData() {
		d3.selectAll(".genre-icon")
			.on('click', function() {
				var genre_id = d3.select(this).attr('id')
				d3.selectAll("svg > *").remove();
				uStates.draw(genre_id, tooltip_genre);
				stats.draw(genre_id)
			});
	}
	function updatelogo() {
		d3.selectAll('#logo')
			.on('click', function() {
				d3.selectAll("svg > *").remove();
				uStates.draw("topgenre", tooltip_topgenre);
				stats.draw("topgenre")
			});
	}
</script>

</html>
